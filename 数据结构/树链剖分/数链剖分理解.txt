树链剖分就是将一棵树剖分成一条一条重链，然后对重新编号的结点建立线段树，或树状数组。
使结点区间权值和的查询操作时间复杂度为logn。

但区间求和，只能是一条重链上的区间，或者是一个结点的子树（其实就是多条重链）。

更新操作可能会影响大区间，但不会影响重链区间，例如：我要求结点[1，8]的权值和，重链划分的区间为[1,4]和[5,8]。此时区间[1，8]记录 的权值和可能是错误的，但划分的重链区间[1,4]和[5,8]肯定是正确的，我们将这两个区间的权值和相加即可。

我们可以根据数组top[u](结点u所在链的顶端结点)和fa[u](结点u的父亲结点)来在重链间进行跳跃。
即fa[top[u]]就到了上一条重链的结点上。

线段树或树状数组的操作只对重链上的区间有效，因为这是一段连续的区间。

当需要对非连续区间操作时，可以将这个区间划分成一段段连续区间(一条条树链)。